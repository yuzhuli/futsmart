### Clone repository
* On github, click Clone or download to copy the URL of the repo.
* cd to the location where you want the cloned directory to be made.
* Type git clone, and then paste the URL you copied

### Create python venv
* Install virtual environment: python3 -m venv ~/.../venv (path to virtual env directory).
* Activate venv: source venv/bin/activate
* cd to the directory where requirements.txt is located.
* run: pip install -r requirements.txt. This will install all the libraries listed in the requirements.txt file.

### Create React app
* cd to the desired directory and run: create-react-app app. By default, the React app generated by create-react-app will run listening on port 3000. 

### When git push failed
* git fetch (fecth remote master to origin master)
* git merge origin/master:
    1. If no conflict, there will be a defult message. You can use :x to save and exit. And then you can git push.
    2. If there is conflict, use git status to see where are they. Update those files to resolve the conflict. And then use "git add --all", "git commit" and "git push".

### The steps to add Bootstrap navbar:
https://m.pardel.net/react-and-bootstrap-4-part-1-setup-navigation-d4767e2ed9f0
* Cleaning up: 
    1. in App.js, remove the reference to the logo — i.e. the line
    2. remove the logo source file: src/logo.svg
    3. remove the existing css from App.css
* Reference Navbar.js in App.js:
    1. Delete existing contents inside return()
    2. Add a div tag. But don't use 'App' as its className. Don't add className.

### How to reference to images in CRA app
Reference: https://create-react-app.dev/docs/adding-images-fonts-and-files/


You can import a file right in a JavaScript module. 
This tells Webpack to include that file in the bundle. Unlike CSS imports, importing a file gives you a string value. This value is the  <b>final path</b> you can reference in your code, e.g. as the src attribute of an image or the href of a link to a PDF.
```javascript
import React from 'react';
import logo from './logo.png'; // Tell Webpack this JS file uses this image
console.log(logo); // /logo.84287d09.png
function Header() {
  // Import result is the URL of your image
  return <img src={logo} alt="Logo" />;
}
export default Header;
```


So we can put all images in a folder under src, and import them in App.js. 
Then when we pass them as attribute to other components, what get passed is the path of the image.

### Change cursor to pointer for image:
https://www.reddit.com/r/reactjs/comments/49ustf/apply_style_to_onclick/
```
<MyThing onClick={(e) => doSomething()} style={{cursor: 'pointer'}}/>
```

### Scrollable image gallery
A good tutorial:
https://www.w3schools.com/howto/howto_js_slideshow_gallery.asp


### Bootstrap style tips
* to edit the style of a component, you can always define custom inline-styles if you'd prefer, like this:
```
<h1 style={{textAlign: "center"}}>Hello World</h1>
```

* Some in-line styles: textAlign, color, backgroundColor. You can always use code auto-complement list to see what are available.

* When no column widths are specified the Col component will render equal width columns.
* div will expand to fill all of its available horizontal space.
* How to customize components with CSS in React Bootstrap: 
    https://react-bootstrap.github.io/getting-started/theming/#custom-styles-variants
* To make some items align to the right: 
    https://getbootstrap.com/docs/4.0/utilities/flex/
    default (no auto margin), pushing two items to the right (.mr-auto), and pushing two items to the left (.ml-auto).


### React Routing
* Tutorial: 
    1. https://reacttraining.com/react-router/web/guides/quick-start
    2. https://blog.pshrmn.com/simple-react-router-v4-tutorial/
    3. https://medium.com/@thejasonfile/basic-intro-to-react-router-v4-a08ae1ba5c42

* `<BrowserRouter>` is usually given an alias of ‘Router’ and this is the parent component that is used to store all of your `<Route>` components. 
* In index.js, everything must be wrapped by a pair of `<BrowserRouter>` tag. Between this pair of tags, write what component should be rendered, for example, `<App />`.
* Then in the App.js, render the component that includes all the routes, which should be wrapped by a pair of `<Route>` tags. If you want a header like a Navbar on the top of every page, you can render it here in the App.js, instead of rendering in some specific page. In the later case, the Navbar will only appear in that specific page, instead of in every page.
* With the above set up, you can write whatever link you need in all other components in src/.

### Styling Player Badge
* Reference:
    1. https://codeburst.io/4-four-ways-to-style-react-components-ac6f323da822
    2. https://stackoverflow.com/questions/33761012/how-to-place-an-image-on-top-of-other-image-in-react-native
* Use a Container/div to contain the background card image. Then use CSS styling to set the position of the card image.
* Use React Grid System to separate the card into several cols. Each col will contain the image/text needed.
* To make sure the image/text be within the card boundary, use a div/Container inside the col to contain them and then add necessary padding.

### React Functional Component
* Turotiral: https://www.robinwieruch.de/react-function-component

### React chartjs2 evenly distributed ticks
* Tutorials:
    1. https://stackoverflow.com/questions/37250456/chart-js-evenly-distribute-ticks-when-using-maxtickslimit
    2. https://stackoverflow.com/questions/22064577/limit-labels-number-on-chart-js-line-chart
    3. Cutomization: https://blog.bitsrc.io/customizing-chart-js-in-react-2199fa81530a
* Also, the step size won't work for the bottom because the default x axis is a 'category' axis that doesn't interpolate numerically.
Reference: https://github.com/chartjs/Chart.js/issues/3811  


### Nodejs and Express for Backend
* Tutorial:
    1. https://auth0.com/blog/node-js-and-express-tutorial-building-and-securing-restful-apis/
    2. https://dev.to/nburgess/creating-a-react-app-with-react-router-and-an-express-backend-33l3
* Download and install Nodejs. https://nodejs.org/en/
* Make a directory for the api app.
* Start a new project by running the command below. To create a default package.json using information extracted from the current directory, use the npm init command with the --yes or -y flag. 
``` 
npm init -y
```
* Next, you will create a new directory called src inside the project root.
* Install necessary dependencies.
```
npm install body-parser express --save
```
* Create a new file like index.js in src/. Then add necessary codes in it including:
```
const express = require('express');
const path = require('path');

const app = express();
const bodyParser = require('body-parser');

// Serve the static files from the React app
app.use(express.static(path.join(__dirname, 'client/build')));

// An api endpoint that returns a short list of items
app.get('/api/getList', (req,res) => {
    var list = ["item1", "item2", "item3"];
    res.json(list);
    console.log('Sent list of items');
});

const port = process.env.PORT || 3001;
app.listen(port);
```
* Now this app can be started by running: node src/index.js. To start the app by running 'npm start', you should have a 'start' key under 'script' in package.json. 

### How to call a flask api in react
https://www.youtube.com/watch?v=06pWsB_hoD4

### Tutorial for docker:
* Tutorial: https://docker-curriculum.com/
* Dockerfile optimization: http://progressivecoder.com/creating-a-dockerfile-for-nodejs-application-from-scratch/
*  You can use the ```docker images``` command to see a list of all images on your system.
* The ```docker pull [xxx]``` command fetches the xxx image from the Docker registry and saves it to our system.
* The ```docker run [xxx]``` command will run a Docker container based on the xxx image. 
 When you call run, the Docker client finds the image (xxx in this case), loads up the container and then runs a command in that container. When we run ```docker run [xxx]```, we didn't provide a command, so the container booted up, ran an empty command and then exited. 
* The ```docker ps``` command shows you all containers that are currently running. ```docker ps -a``` gives a list of all containers that we ran. Do notice that the STATUS column shows that these containers exited a few minutes ago.
* Leaving stray containers will eat up disk space. Hence, as a rule of thumb, I clean up containers once I'm done with them. To do that, you can run the ```docker rm [xxx]``` command. Just copy the container IDs from above and paste them alongside the command. If you have a bunch of containers to delete in one go, copy-pasting IDs can be tedious. In that case, you can simply run - ```docker rm $(docker ps -a -q -f status=exited)```.This command deletes all containers that have a status of exited.
* One last thing that'll be useful is the --rm flag that can be passed to docker run which automatically deletes the container once it's exited from. 
* ```docker run -d -P --name [name you want to use for this container] [image name]```. In the above command, -d will detach our terminal, -P will publish all exposed ports to random ports and finally --name corresponds to a name we want to give.
* You can also specify a custom port to which the client will forward connections to the container. ```docker run -p 8888:80 [image name]```
* To stop a detached container, run ```docker stop [xxx]``` by giving the container ID. 
#### Create docker image:
* To start, create a new blank file in our favorite text-editor and save it in the same folder as the flask app by the name of Dockerfile.
* We start with specifying our base image. Use the FROM keyword to do that -
* The next step usually is to write the commands of copying the files and installing the dependencies.
* The next thing we need to specify is the port number that needs to be exposed. Since our flask app is running on port 5000, that's what we'll indicate.
``` EXPOSE 5000```
* The last step is to write the command for running the application, which is simply - python ./app.py. We use the CMD command to do that. The primary purpose of CMD is to tell the container which command it should run when it is started. 
``` CMD ["python", "./app.py"]```
* Now that we have our Dockerfile, we can build our image. The ```docker build -f [path to dockerfile] [path to the context]``` command does the heavy-lifting of creating a Docker image from a Dockerfile.

#### Dockerfile tips:
* In the server index.js file, must set the app listen on '0.0.0.0' and a certain port. Then in the Dockerfile, EXPOSE this port.
* Since docker cannot access files outside context, for now we should put Dockerfile under the same directory as the server.
* When build, should move to the directory where the Dockerfile exists.
* Dockerfile should always be named as "Dockerfile", no extension.
* To buid with a name, ```docker build -t [a name] .```
* To run and create a container, ```docker run -p 8888:5000 [image name]```
* To restart a stopped docker container, ```docker restart [my_container]```

### Docker compose with Redis and Node/Express
* Tutorial:
    1. http://progressivecoder.com/docker-compose-nodejs-application-with-redis-integration/
    2. https://codewithhugo.com/setting-up-express-and-redis-with-docker-compose/
    3. http://progressivecoder.com/docker-compose-nodejs-application-with-redis-integration/

* CD to the directory of api, and install redis client (not the database itself) by running ```npm install --save redis```.
* For redis-container, for now we'll use the official image found at the following website: https://hub.docker.com/_/redis.
* Create docker-compose.yml file in the project root directory.
* To start a compose in background: ```docker-compose up -d```
* To stop these running containers, ```docker-compose down```

### After using docker, always delete items through the following list
* containers: 
```docker ps -a```
```docker rm [name]```
* images: 
```docker images``` 
```docker image rm [name]```
* volumes: 
```docker volume ls```
```docker volume rm [name]```

### Accessing data in redis container
Tutorail: https://www.youtube.com/watch?v=VOK06Q4QqvE
* First, create a volum  
```docker volume create [name]```
* Then run an image and mount the created volume to the /data directory in the container:  
```docker run --name [name of container] -v [name of voluem]:/data -p 6379:6379 redis```
* Removing this container won't remove the data in the volume. And you can create new contaienrs which also mounted to this volume. Thus you can re-use the data.

### Nodejs async calls
https://github.com/NodeRedis/node_redis

### Pass props to React Router's Link component
Two ways:  
* https://tylermcginnis.com/react-router-url-parameters/
* https://tylermcginnis.com/react-router-pass-props-to-link/
* https://stackoverflow.com/a/44860918/10057192

### Copy to and from container
```docker cp [container name]:container/path/to/file/ host/path/to/file```  
```docker cp host/path/to/file [container name]:container/path/to/file/```  
```docker exec -it redis-dev2 bash```  
```redis-server --dbfilename dump.rdb --dir .```  
```redis-cli -x SET top_increasing_icon < top_increasing_icon.json```

### Server static files in Express 
* Tutorial: https://expressjs.com/en/starter/static-files.html
```app.use('/static', express.static('public'))```   
The above means '/static' will be mapped to '/public'.

### nginx
* Start an nginx process:  
nginx -c /Users/LiYuzhu/code/fifa20-assist-website/nginx.conf


### Import Bootstrap correctly. Very Important!!!
You need to import two things in your index.js file (or app.js file, or wehre ever ReactDOM.render() is.)  
They are listed below:  
```import 'bootstrap/dist/js/bootstrap.js';```  
```import 'bootstrap/dist/css/bootstrap.min.css';```  
If any one is missing, your app cannot be served correctly. Some css styling or js feature may be missing.

### Install Mongodb on Mac
* https://www.robinwieruch.de/mongodb-macos-setup
* https://treehouse.github.io/installation-guides/mac/mongo-mac.html
* Steps 
    1. brew update
    2. brew install mongodb
    3. mkdir -p /data/db
    4. sudo chown -r 'id -un' /data/db
    5. mongod  
    Run the Mongo daemon, in one of your terminal windows. This should start the Mongo server.
    6. mongo  
    Run the Mongo shell, with the Mongo daemon running in one terminal, type mongo in another terminal window. This will run the Mongo shell which is an application to access data in MongoDB.
    7. To exit the Mongo shell run quit()
    8. To stop the Mongo daemon hit ctrl-c

### Accessing data in Mongodb container
Tutorail: https://www.thepolyglotdeveloper.com/2019/01/getting-started-mongodb-docker-container-deployment/  
Pay attention to the first comment. It has informtion about volume
* First, create a volum  
```docker volume create [name]```
* Then run an image and mount the created volume to the /data directory in the container:  
```docker run --name [name of container] -v [name of voluem]:/data/db -p 27017:27017 [mongodb image name]```
* Removing this container won't remove the data in the volume. And you can create new contaienrs which also mounted to this volume. Thus you can re-use the data.

### Connect to Mongodb from Express
Tutorials:  
https://flaviocopes.com/node-mongodb/  
https://www.w3schools.com/nodejs/nodejs_mongodb_query.asp  
https://stackoverflow.com/questions/21076460/how-to-convert-a-string-to-objectid-in-nodejs-mongodb-native-driver/21076589

* After installing Mongodb or making a Mongodb container, you also need to ```npm install mongodb --save```. This lets you require mongodb in your nodejs codes. Currently, it's better to use 'require', instead of 'import'. Using import always cause error when compiling.
* Then you can start creating a client in you nodejs and uses it to access your database.
    1. First, use MongoClient.connect(url, [options (default null)], callback) to create a client. The client and an err will be passed to the callback function.
    2. Then, use ```myDatabase = client.db('name of your database')``` to connect to your database.
    3. Then, use ```myCollection = myDatabase.collection('a collection/table name')``` to connect to the table you want to query.
    4. Now use ```myCollection.findOne({key: value}, callback)``` to query the stuff you need. A response as well as an err will be passed to the callback. You can handle them in the callback. 
    5. If you need to query the collection using a string version of the '_id' object. You need to first check whether the string is a valid string for ObjectID, by using ```ObjectID.isValid(string)```. Then conver the string to ObjectID by using ```ObjectID.(string)```. 

### Only show first 10 lines of a file
head -n 10 output.json

### Dynamodb 
* Making docker container data persistant  
https://stackoverflow.com/questions/52852473/how-to-persist-data-in-a-dockerized-dynamodb-using-volumes  

docker run -d -p 8000:8000 --name dynamodb-dev -v ~/data/dynamodb_data:/home/dynamodblocal/data amazon/dynamodb-local -jar DynamoDBLocal.jar -sharedDb -dbPath /home/dynamodblocal/data  
To persist data in dynamodb docker, you must mount the docker to a local location in your computer. Mounting to a volume doesn't work.